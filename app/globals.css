@import "tailwindcss";

@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  * {
    margin: 0;
    padding: 0;
  }

  html {
    font-family: var(--font-lora), "Lora", serif;
    color: white;
    background-color: #202023;
    scroll-behavior: smooth;
    color-scheme: dark;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    touch-action: manipulation;
    background:
      radial-gradient(ellipse at 75% 5%, rgba(139, 115, 85, 0.07) 0%, transparent 50%),
      radial-gradient(ellipse at 15% 55%, rgba(80, 100, 130, 0.04) 0%, transparent 50%),
      #202023;
  }

  /* Subtle noise grain for texture and depth */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    background-size: 256px 256px;
    opacity: 0.03;
    pointer-events: none;
    z-index: 1;
  }

  /* Skip link for accessibility */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    padding: 8px 16px;
    background: #202023;
    color: white;
    z-index: 100;
    transition: top 0.2s;
  }

  .skip-link:focus {
    top: 0;
  }

  /* Scroll margin for anchor links */
  [id] {
    scroll-margin-top: 2rem;
  }
}

/* Performance optimizations for animations */

/* Enable hardware acceleration for better performance */
.motion-element {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Optimize image rendering */
.motion-image {
  will-change: transform;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

/* Prevent navbar icon flickering */
.navbar-icon {
  contain: layout;
  transform: translateZ(0);
  backface-visibility: hidden;
  /* Reserve space to prevent layout shift */
  min-width: 24px;
  min-height: 24px;
  display: block;
}

/* Optimize navbar container */
.navbar-container {
  contain: layout style;
}

/* Reduce paint operations */
.motion-container {
  contain: layout style paint;
  will-change: auto;
}

/* Optimize text rendering during animations */
.motion-text {
  text-rendering: optimizeSpeed;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Prevent layout thrashing */
.motion-fixed-dimensions {
  contain: size layout;
}

/* GPU acceleration for shadows */
.motion-shadow {
  will-change: box-shadow;
  transform: translateZ(0);
}

/* Optimize scroll-triggered animations */
.motion-scroll-container {
  contain: layout;
  will-change: auto;
}

/* Preload critical animations */
@media (prefers-reduced-motion: no-preference) {
  .motion-preload {
    animation-delay: 0s;
    animation-fill-mode: both;
  }
}

/* Respect user preferences */
@media (prefers-reduced-motion: reduce) {
  .motion-element,
  .motion-image,
  .motion-container,
  .motion-shadow {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
